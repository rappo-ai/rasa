---
id: telegram
sidebar_label: Telegram
title: Telegram
description: Build a Rasa Chat Bot on Telegram
---

You first have to create a Telegram bot to get credentials.
Once you have them you can add these to your `credentials.yml`.

## Getting Credentials

**How to get the Telegram credentials:**
You need to set up a Telegram bot.

1. To create the bot, go to [Bot Father](https://web.telegram.org/#/im?p=@BotFather),
   enter `/newbot` and follow the instructions. The URL that Telegram should send messages to will look like
   `http://<host>:<port>/webhooks/telegram/webhook`, replacing
   the host and port with the appropriate values from your running Rasa X or Rasa Open Source server.

2. At the end you should get your `access_token` and the username you
   set will be your `verify`.

3. If you want to use your bot in a group setting, it's advisable to
   turn on group privacy mode by entering `/setprivacy`. Then the bot
   will only listen when a user's message starts with `/bot`.

4. By default the bot will drop any pending webhook updates from Telegram when launched. 
   This scenario can arise when your Telegram bot receives messages but your Rasa bot is
   not yet up or its execution has paused or crashed. If you wish to process pending updates on
   the next launch please change the key `drop_pending_updates` in the credentials file
   under `telegram` to the value `false`.

For more information, check out the [Telegram HTTP API](https://core.telegram.org/bots/api).

## Running on Telegram

Add the Telegram credentials to your `credentials.yml`:

```yaml-rasa
telegram:
  access_token: "490161424:AAGlRxinBRtKGb21_rlOEMtDFZMXBl6EC0o"
  verify: "your_bot"
  webhook_url: "https://your_url.com/webhooks/telegram/webhook"
```


Restart your Rasa X or Rasa Open Source server
to make the new channel endpoint available for Telegram to send messages to.

## Classifying Telegram Commands

Telegram commands start with a forward slash `/` followed by the command name and optional arguments.
These commands need to be triggered only when the command syntax is precisely followed. In other words,
we need to disable NLU generalisation for intents that represent these commands. You can do this by
using the [KeywordIntentClassifier](/components/#keywordintentclassifier) and adding an intent with metadata `keyword_intent`
set to `true`. Additionally you need to set the metadata `match_condition` to `start` or `exact`
to either match the start of the user's utterance or the exact utterance.

```yaml-rasa
nlu:
  - intent: my_command
  metadata:
    keyword_intent: true
    match_condition: "exact"
  examples: |
    - /my_command
```

Rasa by default treats any user utterance starting with a forward slash as a directive to bypass the NLU,
and directly matches the text following the slash as the intent name. To allow processing of Telegram
commands, NLU bypass is disabled in the Telegram connector. See [NLU Bypass](/nlu-training-data/#nlu-bypass)
to know more.

## Supported Response Attachments

In addition to standard `text:` responses, this channel also supports the following components from the [Telegram API](https://core.telegram.org/bots/api/#message):

- `button` arguments:
  - button_type: inline | vertical | reply
- `custom` arguments:
  - photo
  - audio
  - document
  - sticker
  - video
  - video_note
  - animation
  - voice
  - media
  - latitude, longitude (location)
  - latitude, longitude, title, address (venue)
  - phone_number
  - game_short_name
  - action

:::note
The custom keyboard set by using button type `reply` is cleared on the next incoming user message.

:::

Examples:

```yaml-rasa

  utter_ask_transfer_form_confirm:
  - buttons:
    - payload: /affirm
      title: Yes
    - payload: /deny
      title: No, cancel the transaction
    button_type: vertical
    text: Would you like to transfer {currency}{amount_of_money} to {PERSON}?
    image: "https://i.imgur.com/nGF1K8f.jpg"
```

```yaml-rasa
  utter_giraffe_sticker:
  - text: Here's my giraffe sticker!
    custom:
      sticker: "https://github.com/TelegramBots/book/raw/master/src/docs/sticker-fred.webp"
```
